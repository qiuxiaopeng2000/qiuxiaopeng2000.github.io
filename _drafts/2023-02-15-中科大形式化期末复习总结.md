---
layout: post
title: "科软形式化方法期末复习总结"
date: 2023-02-15 
description: "关于科软形式化方法课程的个人期末复习总结，授课老师为中科大软件学院华保健老师"
tag: 中科大
---   


## 上下文无关文法

出现在式子左边的是非终结符，只出现在式子右边的是非终结符。用上下文无关文法定义一套推演体系，用该推演体系通过替代的方法来证明式子或定理。
 
## 结构化推纳法

1. 对终结符实数n显然成立，将其作为**归纳基础**
2. 假设对非终结符E成立作为**推纳假设**，将非终结符的右端替换式替换非终结符E，推理证明对这些替换式也成立，则原命题得证。

## 命题逻辑
命题逻辑的推理一般是**从下往上推**

符号：
1. $\perp$ 假
2. $\Gamma$ 环境，环境中包含的命题全为真
3. $\rightarrow$ 蕴含
4. $\vdash$ 断言、推导

## 构造主义逻辑

1. 与经典逻辑的区别：是否接收排中律，构造逻辑不接受排中律，不可以用反证法

2. 符号系统：在构造主义中没有$\neg P$，被替换成了$P\rightarrow \perp$
3. 证明系统：与命题逻辑一致
4. 推到规则：剔除了双重否定以及$\neg$的引入和消去

## SAT可满足性问题

定义：对于给定的命题逻辑是否存在解，有解则可满足，无解则不可满足。

求解算法：**DPLL**算法，一种暴力穷举法
1. 先把表达式转换为CNF合取范式
CNF合取范式用D表示吸取符号$\vee$，必须用合取符号$\wedge$连接非原子的式子，且否定符号必须包含在原子命题前
> 1. 消去蕴含
> 2. 转化为NNF否定范式：把否定符号放在原子命题前，且消去多重否定
> 3. 利用C和D运算转换为原子表达式，再把C和D符号转换回去，回溯到最终的CNF表达式，D表示吸取符号。

2. 布尔约束传播BCP算法
> 1. 选取一个单独的原子命题以及包含该原子命题否命题的命题，则该命题等价于剩下的命题。
>2. 若经过BCP运算后能直接判断SAT，则返回结果；若不能直接判断，再使用解析与传播，选择一个原子命题分类讨论。

3. 解析与传播
   1. 解析：决策，通过各个命题之间的关系判断整个式子是否为真
   2. 传播：先令一个原子命题为真，判断是否可满足；若不可满足，再令该命题为假。核心思想是分类讨论。


## 谓词逻辑

语法在命题逻辑的基础上增加了三个语法：$\forall x.P$, $\exist x.P$，关系表达式, 即增加了对原子命题中具体元素的刻画

绑定变量：提前定义的变量。
> 考点：求绑定变量

自由变量：没有提前定义任然使用的变量，可以自由地用其他名称替换而不影响表达式意思。
> 求自由变量
>

变量替换：对绑定变量重命名，对自由变量进行替换。

谓词逻辑的可满足性：SMT
谓词逻辑作为一个大整体，其可满足性难以判断，但对谓词逻辑中的部分子集有完整的理论进行判断。
1. EUF：等式与未解释函数理论，是谓词逻辑地一个子集，要求掌握把程序抽象成等式与未解释理论地命题形式。
2. LA：线性算数理论
   1. 消元法
   2. 单纯形法
   3. 分支定界法

3. 数据结构与理论
   1. 比特向量：位爆炸/位展开算法 + 产生约束。
   2. 数组：E[E]与store(E, E, E) + 几个语法规则。可以把数组读转换成未解释函数，把数组写转换成创造新数组$A'$，则数组理论转换成了EUF形式。
   3. 指针：增加了两个语法store S表示地址&、heap H表示内容*，H和S可以看成两个未解释函数，最终又化成EUF形式。

4. 多个理论组合的命题的SAT判定：Nelson-Oppen算法 
> 先把混合理论命题分解成多个子理论命题的合取形式，先用求出一个子理论的解（此时不一定能求出全部未知数的解），再把该解广播给其它子命题进行求解得到更多的未知数的解，再把新解继续广播，直至把所有的解求出或得到无解，则SAT或UNSAT。

5. 多个理论组合的命题的SAT判定：**DPLL(T)** 算法:
    Nelson-Oppen算法只能求出合取形式的混合命题，DPLL(T)可以求解吸取形式。
> 分情况讨论，把吸取形式两边命题，假设其中一个为非另一个为真，转化为合取形式传给Nelson-Oppen算法求解，若求得SAT，则原命题为SAT；若UNSAT，则继续暴力穷举，假设一个为真另一个为假，直到找到SAT或全为UNSAT。


## 符号执行
1. 给变量不直接赋值，而是用符号代替运行程序。
2. 对于条件判断语句就，每一个条件分支都分别执行，**合取**判断条件作为新命题。
3. 对每一个分支，判断代码出错的条件是否可满足，若可以满足，则报告用这个条件的实际值带入程序重新运行，验证是否真的能除法bug。

缺点：分支过多容易分支爆炸、调用别的库的函数不支持符号执行需要重新建模...


## 混合执行

**按需测试**，当遇到调用其它库函数时可以把具体的值代入得到弱检测，而不至于检测无法进行下去。

1. 同时将符号值与随机生成的具体值送入程序。
2. 遇到条件判断分支时，不同时运行所有分支，只运行代入具体值为真的路径进行测试，再把其中一个条件取非，通过SAT算法求解该命题式为真时的结果，得到一组能进入另一路径的新的解。
3. 把上一步求出的具体解与符号值一起，进入条件判断中的另一条路径进行求解。
4. 循环往复直至得到想要的结果。
